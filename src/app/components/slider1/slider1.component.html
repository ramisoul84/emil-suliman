<div class="image-slider" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()"
     [style.height]="effectiveConfig.height">
  
  <!-- Progress Bar -->
  <div *ngIf="effectiveConfig.showProgress && slides.length > 1" class="progress-container">
    <div class="progress-bar" [style.width]="progress + '%'"></div>
  </div>

  <div class="slider-wrapper">
    <!-- Slides -->
    <div #slide *ngFor="let slide of slides; let i = index" class="slide" [class.active]="i === currentSlide"
      (click)="onSlideClick(slide)"
      [style.background]="slide.overlayColor || 'linear-gradient(135deg, rgba(0,0,0,0.4), rgba(0,0,0,0.6))'">
     
      <!-- Media Content -->
      <div class="slide-media">
        <!-- Image Slide -->
        <img *ngIf="slide.type === 'image'" 
             [src]="slide.src" 
             [alt]="slide.alt || slide.title || 'Slide ' + (i + 1)" 
             class="slide-image" 
             loading="lazy">

        <!-- Lottie Animation Slide -->
        <ng-lottie *ngIf="slide.type === 'lottie'"
                   [options]="slide.lottieOptions || defaultLottieOptions"
                   [style.width]="effectiveConfig.lottieWidth"
                   [style.height]="effectiveConfig.lottieHeight"
                   (animationCreated)="onLottieAnimationCreated($event, i)"
                   class="lottie-animation">
        </ng-lottie>
      </div>

      <div class="slide-overlay" *ngIf="effectiveConfig.overlay"></div>

      <!-- Content -->
      <div class="slide-content" *ngIf="slide.title || slide.description">
        <h3 class="slide-title" *ngIf="slide.title">{{ slide.title }}</h3>
        <p class="slide-description" *ngIf="slide.description">{{ slide.description }}</p>
      </div>
    </div>
  </div>

  <!-- Navigation Arrows -->
  <button *ngIf="effectiveConfig.showArrows && slides.length > 1" class="nav-arrow prev" (click)="prevSlide()"
    aria-label="Previous slide">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round" />
    </svg>
  </button>

  <button *ngIf="effectiveConfig.showArrows && slides.length > 1" class="nav-arrow next" (click)="nextSlide()"
    aria-label="Next slide">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </button>

  <!-- Dots Indicator -->
  <div *ngIf="effectiveConfig.showDots && slides.length > 1" class="dots-container">
    <button #dot *ngFor="let slide of slides; let i = index" class="dot" [class.active]="i === currentSlide"
      (click)="goToSlide(i)" [attr.aria-label]="'Go to slide ' + (i + 1)"></button>
  </div>

</div>